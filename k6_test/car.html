<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>K6 Result Plot</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <div id="plot1"></div>
  <div id="plot2"></div>
  <script>
  const json = [{"t":"2024-11-10T16:58:37Z","vu":12,"avg":7.402099999999999,"p90":11.6855,"p95":45.0214,"p99":45.0214,"rps":14},{"t":"2024-11-10T16:58:38Z","vu":14,"avg":2.6427759999999996,"p90":3.4224,"p95":3.8036,"p99":4.1926,"rps":25},{"t":"2024-11-10T16:58:39Z","vu":15,"avg":2.9903793103448275,"p90":3.656,"p95":4.2318,"p99":4.4422,"rps":29},{"t":"2024-11-10T16:58:40Z","vu":15,"avg":2.4439333333333337,"p90":3.499528456490757,"p95":3.5568,"p99":3.7018,"rps":30},{"t":"2024-11-10T16:58:41Z","vu":15,"avg":3.5266344827586207,"p90":3.8256,"p95":6.1395,"p99":34.2393,"rps":29},{"t":"2024-11-10T16:58:42Z","vu":15,"avg":2.0803800000000003,"p90":3.2138,"p95":3.5525,"p99":4.848,"rps":30},{"t":"2024-11-10T16:58:43Z","vu":15,"avg":2.8669800000000008,"p90":3.64092089586123,"p95":3.9444,"p99":4.1244,"rps":30},{"t":"2024-11-10T16:58:44Z","vu":15,"avg":3.380696666666667,"p90":3.16960573680862,"p95":3.2158,"p99":31.7483,"rps":30},{"t":"2024-11-10T16:58:45Z","vu":15,"avg":2.1279833333333333,"p90":2.759302059605369,"p95":3.1456,"p99":3.2852,"rps":30},{"t":"2024-11-10T16:58:46Z","vu":15,"avg":2.2853033333333332,"p90":2.7826,"p95":2.9318,"p99":2.9739,"rps":30},{"t":"2024-11-10T16:58:47Z","vu":15,"avg":2.2039000000000004,"p90":2.70519382922458,"p95":2.70519382922458,"p99":2.8165,"rps":30},{"t":"2024-11-10T16:58:48Z","vu":15,"avg":2.8108066666666662,"p90":3.6116,"p95":3.8851,"p99":4.0757,"rps":30},{"t":"2024-11-10T16:58:49Z","vu":15,"avg":3.21346,"p90":3.6866,"p95":4.0795,"p99":4.9549,"rps":30},{"t":"2024-11-10T16:58:50Z","vu":15,"avg":3.214073333333334,"p90":3.902242395377934,"p95":4.0025,"p99":4.8072,"rps":30},{"t":"2024-11-10T16:58:51Z","vu":15,"avg":3.0397166666666666,"p90":3.9498,"p95":4.0125,"p99":5.6102,"rps":30},{"t":"2024-11-10T16:58:52Z","vu":15,"avg":2.5369400000000004,"p90":3.16960573680862,"p95":3.2141,"p99":3.7334,"rps":30},{"t":"2024-11-10T16:58:53Z","vu":15,"avg":2.5870433333333334,"p90":3.5693,"p95":3.7967,"p99":3.8957,"rps":30},{"t":"2024-11-10T16:58:54Z","vu":15,"avg":2.463753333333334,"p90":3.3304842698649875,"p95":3.6319,"p99":4.0264,"rps":30},{"t":"2024-11-10T16:58:55Z","vu":15,"avg":2.608626666666667,"p90":3.4089,"p95":3.5868,"p99":3.9191,"rps":30},{"t":"2024-11-10T16:58:56Z","vu":15,"avg":2.4651066666666663,"p90":3.0885,"p95":3.3384,"p99":3.4013,"rps":30},{"t":"2024-11-10T16:58:57Z","vu":15,"avg":2.530216666666666,"p90":3.1383748565425753,"p95":3.3568,"p99":4.0191,"rps":30},{"t":"2024-11-10T16:58:58Z","vu":15,"avg":2.5079866666666666,"p90":3.076833239825424,"p95":3.2771,"p99":3.4622,"rps":30},{"t":"2024-11-10T16:58:59Z","vu":15,"avg":2.6581000000000015,"p90":3.16960573680862,"p95":3.16960573680862,"p99":3.2077,"rps":30},{"t":"2024-11-10T16:59:00Z","vu":15,"avg":2.65274,"p90":3.1697,"p95":3.64092089586123,"p99":3.64092089586123,"rps":30},{"t":"2024-11-10T16:59:01Z","vu":15,"avg":2.227173333333334,"p90":2.8421,"p95":2.9867761393019667,"p99":3.086,"rps":30},{"t":"2024-11-10T16:59:02Z","vu":15,"avg":2.475076666666667,"p90":2.9435,"p95":3.0413,"p99":3.3593,"rps":30},{"t":"2024-11-10T16:59:03Z","vu":15,"avg":2.3418333333333337,"p90":2.8425003749014524,"p95":2.9649,"p99":3.0299,"rps":30},{"t":"2024-11-10T16:59:04Z","vu":15,"avg":2.285030000000001,"p90":2.6785389100982595,"p95":2.8144925416767057,"p99":2.86,"rps":30},{"t":"2024-11-10T16:59:05Z","vu":15,"avg":2.3179366666666668,"p90":2.8707869222142017,"p95":3.0094,"p99":3.1408,"rps":30},{"t":"2024-11-10T16:59:06Z","vu":15,"avg":2.6474766666666674,"p90":3.322,"p95":3.980293523637129,"p99":4.0388,"rps":30}];

  const data1 = [
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.vu),
        type: 'scatter',
        mode: 'lines',
        name: 'Virtual Users'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.rps),
        type: 'scatter',
        mode: 'lines',
        name: 'Requests per Second',
        yaxis: 'y2'
      }
    ];

    const layout1 = {
      title: 'Virtual Users vs Requests per Second',
      xaxis: {
        title: 'Time'
      },
      yaxis: {
        title: 'Virtual Users',
        showline: true,
        zeroline: false,
        showgrid: false
      },
      yaxis2: {
        title: 'Requests per Second',
        overlaying: 'y',
        side: 'right'
      }
    };

    const data2 = [
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.rps),
        type: 'scatter',
        mode: 'lines',
        name: 'Requests per Second'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.avg),
        type: 'scatter',
        mode: 'lines',
        name: 'Average Response Time',
        yaxis: 'y2'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.p90),
        type: 'scatter',
        mode: 'lines',
        name: '90th Percentile',
        yaxis: 'y2'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.p95),
        type: 'scatter',
        mode: 'lines',
        name: '95th Percentile',
        yaxis: 'y2'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.p99),
        type: 'scatter',
        mode: 'lines',
        name: '99th Percentile',
        yaxis: 'y2'
      }
    ];

    const layout2 = {
      title: 'Performance Metrics',
      xaxis: {
        title: 'Time'
      },
      yaxis: {
        title: 'Requests per Second',
        showline: true,
        zeroline: true,
        showgrid: false
      },
      yaxis2: {
        title: 'Response Time (ms)',
        overlaying: 'y',
        side: 'right'
      }
    };

    Plotly.newPlot('plot1', data1, layout1);
    Plotly.newPlot('plot2', data2, layout2);

  </script>
</body>
</html>
