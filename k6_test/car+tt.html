<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>K6 Result Plot</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <div id="plot1"></div>
  <div id="plot2"></div>
  <script>
  const json = [{"t":"2024-11-10T17:19:54Z","vu":16,"avg":358.36822777777775,"p90":818.3439,"p95":854.065,"p99":854.065,"rps":18},{"t":"2024-11-10T17:19:55Z","vu":31,"avg":5.230453333333333,"p90":6.7194,"p95":7.7078,"p99":7.7078,"rps":15},{"t":"2024-11-10T17:19:56Z","vu":44,"avg":10.771464705882355,"p90":28.6279,"p95":33.7314,"p99":33.7314,"rps":17},{"t":"2024-11-10T17:19:57Z","vu":49,"avg":14.30890909090909,"p90":26.5582,"p95":41.0602,"p99":69.0303,"rps":22},{"t":"2024-11-10T17:19:58Z","vu":50,"avg":4.706307692307693,"p90":6.6955,"p95":6.8623,"p99":7.9157,"rps":26},{"t":"2024-11-10T17:19:59Z","vu":50,"avg":5.162483333333333,"p90":7.7041,"p95":11.3026,"p99":11.3026,"rps":12},{"t":"2024-11-10T17:20:00Z","vu":50,"avg":13.270870588235297,"p90":7.2707,"p95":144.0738,"p99":144.0738,"rps":17},{"t":"2024-11-10T17:20:01Z","vu":47,"avg":4.722442307692307,"p90":5.6641,"p95":8.4351,"p99":13.0247,"rps":26},{"t":"2024-11-10T17:20:02Z","vu":49,"avg":4.099557894736842,"p90":5.914693445213545,"p95":5.914693445213545,"p99":5.914693445213545,"rps":19},{"t":"2024-11-10T17:20:03Z","vu":50,"avg":4.203782352941176,"p90":5.7745,"p95":6.1657,"p99":6.1657,"rps":17},{"t":"2024-11-10T17:20:04Z","vu":47,"avg":4.856789999999999,"p90":7.3374,"p95":8.1624,"p99":8.5709,"rps":20},{"t":"2024-11-10T17:20:05Z","vu":50,"avg":5.212309090909091,"p90":6.2099,"p95":7.2965,"p99":9.7308,"rps":22},{"t":"2024-11-10T17:20:06Z","vu":49,"avg":4.772495238095238,"p90":5.9531,"p95":6.402294809280904,"p99":6.402294809280904,"rps":21},{"t":"2024-11-10T17:20:07Z","vu":50,"avg":4.347182352941176,"p90":5.685000749802905,"p95":6.9298,"p99":6.9298,"rps":17},{"t":"2024-11-10T17:20:08Z","vu":50,"avg":4.5572380952380955,"p90":5.546,"p95":6.3192,"p99":9.2609,"rps":21},{"t":"2024-11-10T17:20:09Z","vu":50,"avg":4.774886363636364,"p90":5.3542,"p95":9.1097,"p99":9.9795,"rps":22},{"t":"2024-11-10T17:20:10Z","vu":50,"avg":4.851632,"p90":7.1002,"p95":7.3751,"p99":15.0437,"rps":25},{"t":"2024-11-10T17:20:11Z","vu":49,"avg":5.1487549999999995,"p90":8.3234,"p95":8.5606,"p99":10.5751,"rps":20},{"t":"2024-11-10T17:20:12Z","vu":50,"avg":45.34218235294119,"p90":152.4765,"p95":224.7314,"p99":224.7314,"rps":17},{"t":"2024-11-10T17:20:13Z","vu":46,"avg":6.193009523809524,"p90":11.2151,"p95":11.6557,"p99":19.0577,"rps":21},{"t":"2024-11-10T17:20:14Z","vu":50,"avg":4.158965,"p90":4.8911,"p95":4.9633,"p99":8.9839,"rps":20},{"t":"2024-11-10T17:20:15Z","vu":50,"avg":3.4609947368421046,"p90":4.9483,"p95":12.8031,"p99":12.8031,"rps":19},{"t":"2024-11-10T17:20:16Z","vu":50,"avg":5.018929999999999,"p90":12.1657,"p95":12.6963,"p99":13.5017,"rps":20},{"t":"2024-11-10T17:20:17Z","vu":50,"avg":4.874626315789474,"p90":12.3085,"p95":14.0922,"p99":14.0922,"rps":19},{"t":"2024-11-10T17:20:18Z","vu":49,"avg":4.369235000000001,"p90":8.04,"p95":8.7849,"p99":12.4253,"rps":20},{"t":"2024-11-10T17:20:19Z","vu":50,"avg":4.202757142857143,"p90":6.1904,"p95":7.0923,"p99":10.0562,"rps":21},{"t":"2024-11-10T17:20:20Z","vu":46,"avg":4.474743478260869,"p90":11.5253,"p95":12.8984,"p99":13.4489,"rps":23},{"t":"2024-11-10T17:20:21Z","vu":50,"avg":5.106935,"p90":5.5155,"p95":12.9482,"p99":27.9438,"rps":20},{"t":"2024-11-10T17:20:22Z","vu":48,"avg":3.1928799999999997,"p90":4.2924,"p95":4.9297,"p99":5.7759,"rps":20},{"t":"2024-11-10T17:20:23Z","vu":49,"avg":3.1900071428571435,"p90":4.5681,"p95":4.9656,"p99":4.9656,"rps":14}];

  const data1 = [
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.vu),
        type: 'scatter',
        mode: 'lines',
        name: 'Virtual Users'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.rps),
        type: 'scatter',
        mode: 'lines',
        name: 'Requests per Second',
        yaxis: 'y2'
      }
    ];

    const layout1 = {
      title: 'Virtual Users vs Requests per Second',
      xaxis: {
        title: 'Time'
      },
      yaxis: {
        title: 'Virtual Users',
        showline: true,
        zeroline: false,
        showgrid: false
      },
      yaxis2: {
        title: 'Requests per Second',
        overlaying: 'y',
        side: 'right'
      }
    };

    const data2 = [
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.rps),
        type: 'scatter',
        mode: 'lines',
        name: 'Requests per Second'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.avg),
        type: 'scatter',
        mode: 'lines',
        name: 'Average Response Time',
        yaxis: 'y2'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.p90),
        type: 'scatter',
        mode: 'lines',
        name: '90th Percentile',
        yaxis: 'y2'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.p95),
        type: 'scatter',
        mode: 'lines',
        name: '95th Percentile',
        yaxis: 'y2'
      },
      {
        x: json.map((d) => d.t),
        y: json.map((d) => d.p99),
        type: 'scatter',
        mode: 'lines',
        name: '99th Percentile',
        yaxis: 'y2'
      }
    ];

    const layout2 = {
      title: 'Performance Metrics',
      xaxis: {
        title: 'Time'
      },
      yaxis: {
        title: 'Requests per Second',
        showline: true,
        zeroline: true,
        showgrid: false
      },
      yaxis2: {
        title: 'Response Time (ms)',
        overlaying: 'y',
        side: 'right'
      }
    };

    Plotly.newPlot('plot1', data1, layout1);
    Plotly.newPlot('plot2', data2, layout2);

  </script>
</body>
</html>
